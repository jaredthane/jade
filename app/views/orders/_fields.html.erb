
<% content_for(:javascript) do %>
  <%= javascript_include_tag "order_edit" %>
<% end %>
<% content_for :actions do %>
	<dt><%= link_to 'Remover', @order, :confirm => 'Esta seguro?', :method => :delete, :class => 'action' %></dt>
	<dt><%= link_to 'Cancelar', orders_url, :class => 'action' %></dt>
<% end %>

<%= error_messages_for :order, :header_message => "Surgieron los siguentes dificultades guardando los cambios al pedido:", :message => "" %>

<%= f.hidden_field :order_type_id, :value => @order_type_id %>
<% case order_type_id
	when 2 %>
		<div class="column3-unit-left">
			<p>
				<b>Proveedor</b><br />
				<%= text_field_with_auto_complete :order, :vendor_name, 
									{:class => 'field', :size=>20 }, 
									{:url => '/vendors.js', :skip_style=>1, :method => :get, :param_name => 'search' } %>
			</p>
			<p>
				<b>Numero de Factura</b><br />
				<%= f.text_field :receipt_number, :class => 'field' %>
			</p>
			<%= f.hidden_field :client_id, :value => current_user.location.id %>
		</div>
	<% when 1 %>
		<div class="column3-unit-left">
			<p>
				<b>Cliente</b><br />
				<%= text_field_with_auto_complete :order, :client_name, 
									{:class => 'field', :size=>20, :onblur=>'set_client_name(value)' }, 
									{:url => '/clients.js', :skip_style=>1, :method => :get, :param_name => 'search' } %>
			</p>
			<p>
				<b>Numero de Factura</b><br />
				<%= f.text_field :receipt_number, :class => 'field' %>
			</p>
			<%= f.hidden_field :vendor_id, :value => current_user.location.id %>
		</div>
	<% when 3 %>
		<%= f.hidden_field :vendor_id, :value => current_user.location.id %>
		<%= f.hidden_field :client_id, :value => 1 %>
	<% else %>
		<div class="column3-unit-left">
			<p>
				<b>Proveedor</b><br />
				<%= text_field_with_auto_complete :order, :vendor_name, 
									{:class => 'field', :size=>20 }, 
									{:url => '/vendors.js', :skip_style=>1, :method => :get, :param_name => 'search' } %>
			</p>
			<p>
				<b>Numero de Factura</b><br />
				<%= f.text_field :receipt_number, :class => 'field' %>
			</p>
		</div>
		<div class="column3-unit-middle">
			<p>
				<b>Cliente</b><br />
				<%= text_field_with_auto_complete :order, :client_name, 
									{:class => 'field', :size=>20 }, 
									{:url => '/clients.js', :skip_style=>1, :method => :get, :param_name => 'search' } %>
			</p>
		</div>
<% end %>
	
<div class="column3-unit-right">
	<p>
		<b>Fecha de Pedido</b><br />
		<%= f.date_select :ordered %>
	</p>
	<%= f.hidden_field :user_id, :value => current_user.id %>
</div>

<hr class="clear-contentunit" />

<div>
	<div class="table_header_row">
		<div class="table_cell_30">Producto</div>
		<div class="table_cell_10">Cantidad</div>
		<div class="table_cell_10">Precio por unidad</div>
		<div class="table_cell_20">Recibido <br /> / Num de Serie</div>
		<div class="table_cell_15">Meses de Garantía</div>	
		<div class="table_cell">Acciones</div>
	</div>
	<div id="lines">
		<%= render :partial => 'line', :collection => @order.lines %>
	</div>
	<div id="lines_errors"></div>
	<%= link_to "Añadir otro producto | ", new_line_path(:order_id => @order.id), :id => "add_new_line", :class => 'action'  %>	  
</div>
<p>
  <b>Comentarios para los Movimientos</b><br />
  <%= f.text_area :comments, :class => 'comments' %>
</p>

<%= f.submit "Guardar Pedido", :class => 'action' %>

	
